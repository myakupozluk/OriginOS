#!/bin/sh
# Origin Package Manager (opm)

REPO_URL="http://10.0.2.2:8000"
INSTALL_DIR="/mnt/storage"

if [ "$1" = "install" ]; then
    PACKAGE=$2
    echo "opm: Downloading '$PACKAGE' from Origin Repo..."
    wget "$REPO_URL/$PACKAGE.tar.gz" -P /tmp
    
    if [ $? -eq 0 ]; then
        echo "opm: Installing..."
        mkdir -p $INSTALL_DIR
        tar -xzf "/tmp/$PACKAGE.tar.gz" -C $INSTALL_DIR
        rm "/tmp/$PACKAGE.tar.gz"
        echo "opm: '$PACKAGE' installed successfully to $INSTALL_DIR"
    else
        echo "opm: Error! Package not found on server."
    fi
elif [ "$1" = "list" ]; then
    echo "opm: Installed packages in $INSTALL_DIR:"
    ls $INSTALL_DIR
else
    echo "Usage: opm <install|list> [package_name]"
fi
